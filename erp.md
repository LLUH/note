# ERP项目问题汇总



#### 1	请描述一下这个系统？

从三个方面回答:

第一个方面：系统背景及系统概述

    （蓝云）商贸ERP系统针对中小型商贸企业开发设计的企业资源计划管理系统。通过ERP系统的管理，企业可以有效管理经营各个环节中的业务数据。企业数据经过收集汇总后，为各级终端用户提供日常业务信息管理、业务流程执行等日常办公服务辅助平台，辅助本职能部门出具预案决策，提高整体企业内部业务工作效率。

第二个方面：系统包括的业务模块及主业务流程

本系统包括了：基本信息管理、人事管理、采购管理、销售管理、库存管理、统计分析、工作流管理、权限管理等模块。

第三个方面：系统的技术方案

本系统采用SSH2集成框架+EasyUI + Shiro    数据库采用Oracle  

### 2	这个系统你做了哪些模块？

（拿你熟悉的模块说）

### 3	说说系统的架构以及用到的一些技术

本系统采用目前最流行的前后端模式。后端采用SSH2集成框架开发（struts2、spring4.、hibernate5），并且权限框架采用Shiro ,报表采用JfreeChart ,导出数据采用POI,前端采用easyUI + JQuery 。

### 4	说说Spring在整个系统中的作用

spring的作用：

	spring作为整个系统的粘合剂，整合了hibernate和struts2，管理控制层的action、业务逻辑层的biz、数据访问层的dao，对struts的action采用多例的方式管理，对biz和dao采用单例方式。

	本系统采用声明式事务控制方式对业务逻辑层进行事务控制，spring和hibernate整合后， spring在业务逻辑层方法开发执行前创建session，开启事务，方法结束提交事务，关闭session。

	spring和shiro进行整合开发，spring管理shiro框架的securityManager、realm等bean。

### 5	请说一下这个系统hibernate具体的技术细节。

本系统大部分的功能主要使用hibernate的离线QBC查询，在多表关联和统计功能采用HQL查询。

使用QBC查询的优点主要是它非常适合动态组合的条件查询，而HQL的优点主要在于它在编写多表关联时比较容易，通常用于统计分析模块的编写。

Hibernate的三种查询方式

Hql

Qbc

本地sql

### 6	你主要采用的什么主键生成策略？

我们采用的主键生成策略是sequence ，直接指定序列

### 7	你在哪个地方使用到了hibernate关联

我们的人员和部门建立了单向多对一关联，商品和商品类型建立了单向多对一关联，订单和订单明细建立了双向一对多关联。在权限系统部门，用户和角色是多对多关联 ，角色和权限是多对多关联。  

### 8	这个系统struts2是怎么用的？ 

我们的系统只是用到了struts2的属性驱动和动态方法配置，由于采用的是前后端的编程架构，前端使用了easyUI,所以没有用到struts2标签。

### 9	解释一下属性驱动，除了属性驱动，还有什么方式可以接收页面传递过来的值

属性驱动是在action中直接定义需要接收的属性，并需要有getter和setter方法 。我们在项目中全部采用属性驱动，具有定义灵活使用方便的效果 。还有一种叫模型驱动，是通过让Action实现ModelDriven接口并指定模型对象类型，模型对象类型即为pojo。

### 10	这个系统UI使用什么框架？都用到jquery easy ui的哪些组件？ 

系统UI使用Jquery easy UI，及jquery库。

系统框架布局使用layout，系统标签窗口采用tabs，数据列表采用datagrid，下拉列表combobox ,下拉数据表格combogrid   弹出窗口 window  消息提示：messager   树控件 tree  等。

### 11	本系统ajax+json具体是怎么做的？action的方法返回的json是如何实现的？ 

ajax+json：页面采用ajax提交，服务端返回是json，注意：页面提交的是key/value串。

页面提交统一采用ajax Form提交方式，引用了一个叫form.js的脚本，其中使用了jquery提供form组件$\("\#form1"\).serializeJSON\(\)  ，再加上二次封装，起到了简化开发的作用。

### 12	系统哪些地方使用到了json？

1、	数据列表查询返回json，在页面中使用jqeru easy ui的datagrid进行解析。

2、	所有提交类的action方法统一返回json

3、	异常处理器会将异常信息转为json

4、	系统菜单使用json数据表示。

使用json目的：使用json方便客户端页面解析数据。

### 13	你是如何将对象转成JSON或是将JSON转成对象？

我们采用的解析JSON的工具是现在广泛采用的流行json工具包----阿里巴巴的fastJSON.  它提供了toJsonString方法将对象或集合转换为json字符串 ，parse方法用于将json字符串转换为对象（MAP）.

parseArray方法用于将json字符串转换为List 集合

### 14	系统异常处理是怎么做的？

分两个方面：

1、系统异常类型

自定义了一个系统异常类，继承RuntimeException，该异常类需要编写一个string类型的参数的的构造方法，构造方法中调用父类的构造方法。该参数为异常的具体信息。

2、系统异常的捕获和解析

   dao层出现错误抛给biz、biz出现异常抛给action、action捕获异常进行输出。

### 15	你如何理解前端验证和后端验证，是如何实现的？ 

前端验证是在前端所进行的数据校验，主要用于非空验证和常用的格式验证。我们采用的是easyUI提供的校验控件\(validatebox \)它对常用的校验规则进行了封装。

后端验证是在业务逻辑层编写的用于校验数据的逻辑。通常用于重复性验证、关联数据验证等。

### 16	如果我要实现某个数据非空验证，是不是写了前端验证就不用写后端验证了？

对于一些特别重要的数据，最好是前端后端都验证，这样可以“双保险”，大部分的非法请求通过前端拦截，可以避免后端承载过多的压力。但是前端验证是“不把握”的，有可能被用户的浏览器所屏蔽，所以对于重要的数据后端验证也是有必要的。另外比如重复性验证只能要给后端来做。

### 17	谈一下你编写过的比较复杂的业务逻辑是什么？

我编写过比较复杂的业务逻辑是采购入库和销售出库，两者的业务逻辑很相似。我就说一说销售出库的业务逻辑吧。

销售出库的业务逻辑分为4步：

（1）修改订单明细的状态、出库时间等字段。

（2）修改库存数量，需要判断当前出库的库存是否小于库存，如果出库大于库存则抛出库存不足的自定义异常。

（3）记录库存变动记录表

（4）判断当明细的记录全部出库后，修改订单主表的状态等信息。

### 18	你在使用下拉列表数据时，如果下拉列表数据过多（100条以上），你是如何让用户很快找到要选择的数据的呢？

有一种叫做自动补全的解决方案。类似与百度搜索那样的，当用户输入某个字符后，下拉列表会自动根据输入的数据模糊搜索并展示搜索的结果。

我在ERP中采用的是easyUI的combobox和combogrid 组件,他们有一个属性是mode  设置为remote，这样用户每次输入字符就会自动向后端action发送叫q的参数。后端代码就可以根据这个参数值来进行模糊搜索。

### 19	请描述采购业务流程？

首先采购员发起采购申请，然后由采购经理审批，审批后由采购员确认采购，最后一步是入库。

每个流程节点是如何控制的？通过状态值来判断

### 20	ERP系统的权限系统是如何构建的？ 

我们的权限系统用到5张表： 用户表（emp）、角色表\( role \) 、权限表\( menu \)、用户角色中间表 （emp\_role） 、角色权限中间表（role\_menu ） 。

在hibernate中，用户和角色建立多对多关联，角色与权限建立多对多关联。  权限系统包括用户管理（增删改查） 、角色管理（增删改查） 、角色权限设置 、用户角色设置、权限菜单等功能。前端页面主要采用了tree控件，实现对角色、权限的设置。

### 21	你如何实现根据用户查询到该用户拥有的权限？

我们使用了HQL的多对多关联查询，语句如下：

select m from Emp e join e.roles r  join r.menus m where e.uuid=?

### 22	你如何保证用户在没有登陆的情况下不能访问系统的功能？ 

我们采用了现在主流的权限框架shiro ，通过配置认证和授权信息，实现对系统功能的控制。

### 23	你们的统计报表是如何实现的？

我们的报表分三部分：

（1）统计表

统计表我只做了其中一个，后来其它统计报表交给另外一个开发组来完成。我做的是销售统计报表，功能是统计每种商品类型在一段时间的销售额。

这个功能涉及到4个表关联查询（商品表、商品分类表、订单表、订单明细表），也用到了聚合函数sum\(\).  

（2）统计图

统计图我们采用的是highChart 来实现一个饼图。统计出每种商品的销售额占总销售额的百分比。

（3）报表导出

我们采用了POI技术来实现对统计结果的导出。

### 24	系统中有导出功能吗？怎么实现的？ 

我们通过用POI技术实现导出。

我们这里主要是用到了POI 的几个核心的类。

HSSFWorkBook\(工作簿\)  HSSFSheet （工作表） HSSFRow（行） HSSFCell （列）



## \*\* 技术面试回答技巧

### 【1】知己知彼。

在面试任何一家公司前，最好要了解这家公司所采用的技术方向和产品的类型。这样你在面试时要重点突出自己的项目经验与公司产品的共同点或融合点，让面试官认为你的技术或知识结构和他们要求的是相符的。

例：你对我们公司的产品有多少了解。

 

答：我之前听过说公司的产品《XXXX》（接下来简单描述一下产品的特点），做的非常不错（给予肯定，回答问题也别忘了说几句赞美的话）。 而我之前负责开发ERP系统进销存模块，从技术解决方案和业务上与公司产品有很多相似之处（抬高别人把自己也带上，呵呵），相信我加入公司会很快进入状态（不要忘记时刻推销自己）。



### 【2】扭转乾坤。

在面试中难免会遇到一些回答不上来的问题，可能有些你只是听说，有些用过但记忆不深刻或者从来没有用过。这样的问题不要直接回答不会或是不知道，而是要掌握回答的技巧，做适当的“跑题”，让面试官认为你能懂一些相关的知识，这样才不至于在这道题上给你打个零分。



例：了解正则表达式吗？EMail的正则表达式如何编写？你能写出特殊规则的正则表达式吗？

答：正则表达式定义了一组符号，根据相应的规则来实现数据的校验。原来没有用easyUI前在JS中使用过简单的正则表达式，但是都是常用规则，上网“百度”一下直接就用了，包括EMAIL的 URL的 电话的什么的都是“百度”，（呵呵） 。

要是自己来写一个特殊的规则，说实话，有些费劲，毕竟这东西写的有点少，但是经过查阅资料研究研究最后也能写出来，总体感觉不是特别难。

使用easyUI后，就再也没有直接使用到正则表达式了，因为easyUI给你封装起来了，如果要实现一个EMAIL规则的校验，只需要添加一个属性 validType 为email  .



### 【3】以退为进。

有些问题确实也答不上来，或者是根本没听说的技术。这时候不要慌。要非常镇定、谦虚地、放松地向面试官请教问题，问一下这个技术到底是做什么用的。如果这个技术和你之前用的某个技术可以达到相同的效果，可以讲一下你之前用的技术可以达到这样的效果，并且有什么优点等等。



例：

面试官: 听说过Memcached吗？



答：这个。。我向请教一下Memcached是做什么用的？

面试官：Memcached是一个高性能的分布式内存对象缓存系统。。。。。

答：哦。（点头）我想起来了（其实是头一次听说，哈哈，这也太能装了）我听原来一个同事在讨论问题时提起过，但是后来我们在项目中没采用。当时做的的电商系统，采用的是缓存对象数据库产品Redis 。据说是现在企业使用Redis的要更多一些。（接下来对你了解的一些知识展开描述，重点说优点）  如果贵公司要是用的Memcached的话，我估计看看文档很快就会用了。原来我学Redis也是百度一下看看文档就会了，这东西应该是比Redis简单。（突出自己自学能力强）

总之，不要轻易地放弃每一个题目，即便是这个问题答不上来，也不要忘记推销自己。



